# üß™ Test Plan - –ù–æ–≤–∞ –°–∏—Å—Ç–µ–º–∞ –û—Ü—ñ–Ω–∫–∏ (method.txt)

## –©–æ —Ç–µ—Å—Ç—É—î–º–æ

–ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —â–æ –Ω–æ–≤–∞ —Å–∏—Å—Ç–µ–º–∞ –æ—Ü—ñ–Ω–∫–∏ –ø—Ä–∞—Ü—é—î –∑–≥—ñ–¥–Ω–æ –∑ method.txt:
1. ‚úÖ 4 –∫–Ω–æ–ø–∫–∏ –æ—Ü—ñ–Ω–∫–∏ –∑–∞–º—ñ—Å—Ç—å —Å–≤–∞–π–ø—ñ–≤
2. ‚úÖ Instant –∞–ø–¥–µ–π—Ç –≤–∞–≥ –ø—ñ—Å–ª—è –∫–æ–∂–Ω–æ—ó –æ—Ü—ñ–Ω–∫–∏
3. ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ñ –¥–µ–ª—å—Ç–∏: -3 ‚Üí -15, -1 ‚Üí -5, +1 ‚Üí +5, +3 ‚Üí +15

---

## –ö—Ä–æ–∫ 1: –ó–∞–ø—É—Å—Ç–∏—Ç–∏ Backend

```bash
cd backend
npm run dev
```

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π –≤–∏–≤—ñ–¥:**
```
Server running on http://localhost:5001
‚úÖ Connected to Supabase
```

---

## –ö—Ä–æ–∫ 2: –ó–∞–ø—É—Å—Ç–∏—Ç–∏ Frontend

```bash
cd frontend
npm start
```

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π –≤–∏–≤—ñ–¥:**
```
Compiled successfully!
Local: http://localhost:3000
```

---

## –ö—Ä–æ–∫ 3: –°—Ç–≤–æ—Ä–∏—Ç–∏ –¢–µ—Å—Ç–æ–≤—É –°–µ—Å—ñ—é

1. –ó–∞–π—Ç–∏ –Ω–∞ http://localhost:3000
2. –õ–æ–≥—ñ–Ω (testuser / test123)
3. **Projects** ‚Üí –í–∏–±—Ä–∞—Ç–∏ –ø—Ä–æ—î–∫—Ç –∞–±–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–∏–π
4. **Sessions** ‚Üí –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤—É —Å–µ—Å—ñ—é
5. **Generate** ‚Üí –í—ñ–¥–∫—Ä–∏—î—Ç—å—Å—è GeneratePageV3

---

## –ö—Ä–æ–∫ 4: –ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –ö–æ–Ω—Ç–µ–Ω—Ç

1. –í–≤–µ—Å—Ç–∏ prompt: `–ö—Ä–∞—Å–∏–≤–∞ –¥—ñ–≤—á–∏–Ω–∞, —É —Å–µ–±–µ –≤–¥–æ–º–∞`
2. –í–∏–±—Ä–∞—Ç–∏ –º–æ–¥–µ–ª—å: **Seedream 4** (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º)
3. –í–∏–±—Ä–∞—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å: **3** (–¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ —Ç–µ—Å—Ç—É)
4. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ **üöÄ –ì–µ–Ω–µ—Ä—É–≤–∞—Ç–∏**

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π –≤–∏–≤—ñ–¥ –≤ Backend logs:**
```
üöÄ GENERATION REQUEST - V3
Session ID: ...
Project ID: ...
User Prompt: –ö—Ä–∞—Å–∏–≤–∞ –¥—ñ–≤—á–∏–Ω–∞, —É —Å–µ–±–µ –≤–¥–æ–º–∞
Count: 3
Model: seedream-4

--- GENERATION 1/3 ---
üé≤ SELECTING PARAMETERS (Weighted Random)
‚úÖ Parameters selected: 14
ü§ñ BUILDING PROMPT WITH AGENT
‚úÖ PROMPT BUILT SUCCESSFULLY
üé® Generating image with seedream-4
‚úÖ Content saved: ...
```

---

## –ö—Ä–æ–∫ 5: –¢–µ—Å—Ç –û—Ü—ñ–Ω–∫–∏ +3 (–ß—É–¥–æ–≤–æ!)

1. –ü–µ—Ä—à–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑'—è–≤–∏–ª–æ—Å—è
2. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ **üî• –ß—É–¥–æ–≤–æ!** (+3)
3. –û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ –¥–æ–¥–∞—Ç–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä
4. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ **‚úÖ –ó–±–µ—Ä–µ–≥—Ç–∏**

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π –≤–∏–≤—ñ–¥ –≤ Backend logs:**
```
‚≠ê RATING CONTENT
Content ID: ...
Rating: 3
‚úÖ Rating saved

‚öñÔ∏è  INSTANT WEIGHT UPDATE
Content ID: ...
Rating: 3
üìä Updating 14 parameters
üìà Weight delta: +15
‚úÖ Updated 14 weights
üìä Weight changes:
   age.young_adult: 100 ‚Üí 115 (+15)
   gender.woman: 100 ‚Üí 115 (+15)
   pose.mirror_selfie: 100 ‚Üí 115 (+15)
   lighting.studio: 100 ‚Üí 115 (+15)
   setting.indoor: 100 ‚Üí 115 (+15)
```

**‚úÖ –¢–µ—Å—Ç –ø—Ä–æ–π—à–æ–≤:** –í—Å—ñ 14 –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ –æ—Ç—Ä–∏–º–∞–ª–∏ +15

---

## –ö—Ä–æ–∫ 6: –¢–µ—Å—Ç –û—Ü—ñ–Ω–∫–∏ -1 (–ù–µ –ø–æ–¥–æ–±–∞—î—Ç—å—Å—è)

1. –î—Ä—É–≥–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑'—è–≤–∏–ª–æ—Å—è
2. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ **üëé –ù–µ –ø–æ–¥–æ–±–∞—î—Ç—å—Å—è** (-1)
3. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ **‚è≠Ô∏è –ë–µ–∑ –∫–æ–º–µ–Ω—Ç–∞—Ä—è**

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π –≤–∏–≤—ñ–¥ –≤ Backend logs:**
```
‚≠ê RATING CONTENT
Rating: -1

‚öñÔ∏è  INSTANT WEIGHT UPDATE
Rating: -1
üìà Weight delta: -5
‚úÖ Updated 14 weights
üìä Weight changes:
   age.middle_aged: 100 ‚Üí 95 (-5)
   gender.man: 100 ‚Üí 95 (-5)
   ...
```

**‚úÖ –¢–µ—Å—Ç –ø—Ä–æ–π—à–æ–≤:** –í—Å—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –æ—Ç—Ä–∏–º–∞–ª–∏ -5

---

## –ö—Ä–æ–∫ 7: –¢–µ—Å—Ç –û—Ü—ñ–Ω–∫–∏ -3 (–ñ–∞—Ö–ª–∏–≤–æ)

1. –¢—Ä–µ—Ç—î –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑'—è–≤–∏–ª–æ—Å—è
2. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ **üò° –ñ–∞—Ö–ª–∏–≤–æ** (-3)

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π –≤–∏–≤—ñ–¥:**
```
‚öñÔ∏è  INSTANT WEIGHT UPDATE
Rating: -3
üìà Weight delta: -15
‚úÖ Updated 14 weights
```

**‚úÖ –¢–µ—Å—Ç –ø—Ä–æ–π—à–æ–≤:** –í—Å—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –æ—Ç—Ä–∏–º–∞–ª–∏ -15

---

## –ö—Ä–æ–∫ 8: –¢–µ—Å—Ç Skip (–ü—Ä–æ–ø—É—Å—Ç–∏—Ç–∏)

1. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ **‚è≠Ô∏è –ü—Ä–æ–ø—É—Å—Ç–∏—Ç–∏ (–±–µ–∑ –æ—Ü—ñ–Ω–∫–∏)**

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π –≤–∏–≤—ñ–¥:**
- –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –¥–æ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
- **–ë–ï–ó** –≤–∏–∫–ª–∏–∫—É updateWeightsInstantly
- –í–∞–≥–∏ –ù–ï –∑–º—ñ–Ω—é—é—Ç—å—Å—è

**‚úÖ –¢–µ—Å—Ç –ø—Ä–æ–π—à–æ–≤:** –ü—Ä–æ–ø—É—Å–∫ –Ω–µ –≤–ø–ª–∏–≤–∞—î –Ω–∞ –≤–∞–≥–∏

---

## –ö—Ä–æ–∫ 9: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ï–≤–æ–ª—é—Ü—ñ—ó –í–∞–≥

1. –ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ —â–µ 3 –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
2. –û—Ü—ñ–Ω–∏—Ç–∏ –≤—Å—ñ —è–∫ +3 (–ß—É–¥–æ–≤–æ!)
3. –ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ —â–µ 3 –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑ –≤–∏—Å–æ–∫–∏–º–∏ –≤–∞–≥–∞–º–∏ (115+) –º–∞—é—Ç—å —á–∞—Å—Ç—ñ—à–µ –∑'—è–≤–ª—è—Ç–∏—Å—è
- –ù–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ `age.young_adult` –º–∞—î –≤–∞–≥—É 130, –∞ `age.middle_aged` - 85, —Ç–æ `young_adult` –±—É–¥–µ –æ–±–∏—Ä–∞—Ç–∏—Å—è —á–∞—Å—Ç—ñ—à–µ

**‚úÖ –¢–µ—Å—Ç –ø—Ä–æ–π—à–æ–≤:** –°–∏—Å—Ç–µ–º–∞ –Ω–∞–≤—á–∞—î—Ç—å—Å—è –Ω–∞ –æ—Å–Ω–æ–≤—ñ –æ—Ü—ñ–Ω–æ–∫

---

## üî• –ö—Ä–∏—Ç–∏—á–Ω—ñ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∏

### ‚úÖ 1. –í–∞–≥–∏ –æ–±–º–µ–∂–µ–Ω—ñ 0-200
```javascript
// –í weights.service.js:
const newWeight = Math.max(0, Math.min(200, currentWeight.weight + weightDelta));
```

**–¢–µ—Å—Ç:** –û—Ü—ñ–Ω–∏—Ç–∏ 20 —Ä–∞–∑—ñ–≤ +3 ‚Üí –≤–∞–≥–∞ –º–∞—î –∑—É–ø–∏–Ω–∏—Ç–∏—Å—è –Ω–∞ 200

### ‚úÖ 2. –ö–æ–∂–Ω–∞ –æ—Ü—ñ–Ω–∫–∞ –∞–ø–¥–µ–π—Ç–∏—Ç—å –ë–î –æ–¥—Ä–∞–∑—É
**–¢–µ—Å—Ç:** –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤ Supabase Database ‚Üí `weight_parameters` ‚Üí –≤–∞–≥–∏ –∑–º—ñ–Ω—é—é—Ç—å—Å—è –æ–¥—Ä–∞–∑—É

### ‚úÖ 3. Frontend –ø–æ–∫–∞–∑—É—î –ø—Ä–∞–≤–∏–ª—å–Ω—ñ –∫–Ω–æ–ø–∫–∏
**–¢–µ—Å—Ç:** 4 –∫–Ω–æ–ø–∫–∏ + Skip, –∫–æ–∂–Ω–∞ –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—é —ñ–∫–æ–Ω–∫–æ—é —Ç–∞ –∑–Ω–∞—á–µ–Ω–Ω—è–º

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

| –¢–µ—Å—Ç | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–º—ñ—Ç–∫–∏ |
|------|--------|----------|
| 4 –∫–Ω–æ–ø–∫–∏ –æ—Ü—ñ–Ω–∫–∏ | ‚è≥ | –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ |
| Instant –∞–ø–¥–µ–π—Ç –≤–∞–≥ | ‚è≥ | –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ |
| Rating +3 ‚Üí +15 | ‚è≥ | –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ |
| Rating +1 ‚Üí +5 | ‚è≥ | –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ |
| Rating -1 ‚Üí -5 | ‚è≥ | –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ |
| Rating -3 ‚Üí -15 | ‚è≥ | –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ |
| Skip –±–µ–∑ –∞–ø–¥–µ–π—Ç—É | ‚è≥ | –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ |
| –í–∞–≥–∏ 0-200 | ‚è≥ | –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ |
| –ï–≤–æ–ª—é—Ü—ñ—è —Å–∏—Å—Ç–µ–º–∏ | ‚è≥ | –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ |

---

## üêõ –ú–æ–∂–ª–∏–≤—ñ –ü—Ä–æ–±–ª–µ–º–∏

### –ü—Ä–æ–±–ª–µ–º–∞ 1: "Bucket not found"
**–†—ñ—à–µ–Ω–Ω—è:** –°—Ç–≤–æ—Ä–∏—Ç–∏ bucket –≤ Supabase (–¥–∏–≤. SUPABASE_BUCKET_SETUP.md)

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –í–∞–≥–∏ –Ω–µ –∑–º—ñ–Ω—é—é—Ç—å—Å—è
**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:**
1. Backend logs - —á–∏ –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è `updateWeightsInstantly`?
2. Supabase DB - —á–∏ –∑–º—ñ–Ω—é—é—Ç—å—Å—è –∑–Ω–∞—á–µ–Ω–Ω—è –≤ `weight_parameters`?

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ö–Ω–æ–ø–∫–∏ –Ω–µ —Ä–µ–∞–≥—É—é—Ç—å
**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:**
1. Browser console - —á–∏ —î –ø–æ–º–∏–ª–∫–∏ JavaScript?
2. Network tab - —á–∏ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è POST /api/generation/rate?

---

## ‚úÖ Success Criteria

–°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞—Ü—é—î –ø—Ä–∞–≤–∏–ª—å–Ω–æ, —è–∫—â–æ:
1. ‚úÖ –í—Å—ñ 4 –∫–Ω–æ–ø–∫–∏ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è —ñ –ø—Ä–∞—Ü—é—é—Ç—å
2. ‚úÖ –ü—ñ—Å–ª—è –∫–æ–∂–Ω–æ—ó –æ—Ü—ñ–Ω–∫–∏ –≤ –ª–æ–≥–∞—Ö –∑'—è–≤–ª—è—î—Ç—å—Å—è "INSTANT WEIGHT UPDATE"
3. ‚úÖ –í–∞–≥–∏ –∑–º—ñ–Ω—é—é—Ç—å—Å—è –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ –¥–µ–ª—å—Ç–∏ (-15, -5, +5, +15)
4. ‚úÖ –ù–∞—Å—Ç—É–ø–Ω—ñ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –≤—Ä–∞—Ö–æ–≤—É—é—Ç—å –Ω–æ–≤—ñ –≤–∞–≥–∏
5. ‚úÖ Skip –Ω–µ –≤–ø–ª–∏–≤–∞—î –Ω–∞ –≤–∞–≥–∏

